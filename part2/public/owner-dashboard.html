<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Owner Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    label {
      display: block;
      margin-top: 10px;
    }

    select, input {
      margin-top: 5px;
      padding: 5px;
      width: 200px;
    }

    button {
      margin-top: 15px;
      padding: 8px 16px;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Owner Dashboard!</h1>

  <h2>Create New Walk Request</h2>
  <form method="POST" action="/walkrequests">
    <label for="dogSelect">Select Your Dog</label>
    <select id="dogSelect" name="dog_id" required>
      <option disabled selected>Choose a dog</option>
    </select>

    <label for="datetime">Date and Time</label>
    <input type="datetime-local" name="datetime" id="datetime" required />

    <label for="duration">Duration (minutes)</label>
    <input type="number" name="duration" id="duration" min="5" required />

    <label for="location">Location</label>
    <input type="text" name="location" id="location" required />

    <button type="submit">Submit Walk Request</button>
  </form>

  <form method="POST" action="/logout">
    <button type="submit">Log Out</button>
  </form>

  <script>
    window.onload = async function() {
      try {
        const res = await fetch('/api/mydogs');
        const dogs = await res.json();
        const select = document.getElementById('dogSelect');

        dogs.forEach(dog => {
          const option = document.createElement('option');
          option.value = dog.id;
          option.textContent = dog.name;
          select.appendChild(option);
        });
      } catch (err) {
        alert("Failed to load your dogs.");
      }
    };
  </script>
</body>
</html>